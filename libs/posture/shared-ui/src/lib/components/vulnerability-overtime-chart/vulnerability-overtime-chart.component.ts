import { 
  Component, 
  ChangeDetectionStrategy, 
  ElementRef,   
  Input 
} from '@angular/core';
import { ChartType } from 'angular-google-charts';


@Component({
  selector: 'armo-vulnerability-overtime-chart',
  templateUrl: './vulnerability-overtime-chart.component.html',
  styleUrls: ['./vulnerability-overtime-chart.component.scss'],
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class VulnerabilityOvertimeChartComponent {

  @Input() 
  set data(value: number[][] | undefined) {         
    this.chartData = {
      type: ChartType.LineChart,
      data: value,
      columnNames: ['Week', 'Critical', 'High', 'Medium', 'Low'],
      options: {
        curveType: 'function',
        legend: 'none',
        vAxis: {     
          title: '',     
          textStyle: {
            color: '#97999B'
          },
          gridlines: {
            color: 'transparent'
          }
        },
        hAxis: {
          title: '',
          textStyle: {
            color: '#97999B'
          },
          gridlines: {
            color: 'transparent'
          }
        },
        series: {
          0: { color: '#E1449F' },
          1: { color: '#122A83' },
          2: { color: '#367EFF' },
          3: { color: '#17CDA9' },
        },
        backgroundColor: 'transparent',
        chartArea: {
          left: 30,
          top: 10,
          height: 180,
          width: this.hostElement.nativeElement.offsetWidth - 30
        }
      },
      height: 230,
      width: this.hostElement.nativeElement.offsetWidth
    };      
  }

  chartWidth: number = 0;
  chartData: any = {
    type: ChartType.LineChart,
    data: [[0,0,0,0,0]],
    columnNames: ['Week', 'Critical', 'High', 'Medium', 'Low'],
    options: {
      chartArea: {
        left: 0,
        top: 0,
        height: 0,
        width: 0
      }
    },
    height: 0,
    width: 0
  };
  
  constructor(
    private hostElement: ElementRef,
  ) {
  } 
  
}
